name: Delta OTM Options Observer

on:
  schedule:
    # Runs at 3:30 AM IST daily (10:00 PM UTC previous day)
    # IST = UTC + 5:30, so 3:30 AM IST = 10:00 PM UTC
    - cron: '0 22 * * *'
  
  # Allows manual trigger from Actions tab
  workflow_dispatch:

jobs:
  run-delta-script:
    runs-on: ubuntu-latest
    
    steps:
      # Step 1: Download your code from repository
      - name: Checkout repository
        uses: actions/checkout@v3
      
      # Step 2: Set up Python 3.10
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'
      
      # Step 3: Install required library (requests)
      - name: Install dependencies
        run: |
          echo "Installing required Python libraries..."
          pip install requests
          echo "Dependencies installed successfully!"
      
      # Step 4: Run your Delta Exchange script
      - name: Run Delta OTM Script
        run: |
          echo "=========================================="
          echo "Starting Delta OTM Options Observer"
          echo "Time: $(date)"
          echo "=========================================="
          python 15StrikesFarOTMPicker.py
          echo "=========================================="
          echo "Script completed at: $(date)"
          echo "=========================================="
      
      # Step 5: Upload log files as artifacts (so you can download them)
      - name: Upload logs
        if: always()  # Upload even if script fails
        uses: actions/upload-artifact@v3
        with:
          name: option-chain-logs-${{ github.run_number }}
          path: option_chain_logs/
          retention-days: 90
```

5. Review the code (it's well commented so you understand what each part does)

6. Click **"Commit changes..."** (green button, top right)

7. In the popup:
   - Leave default commit message
   - Click **"Commit changes"**

**âœ… Your workflow is created!**

---

## STEP 4: Test It Manually (Don't Wait Till 3:30 AM!) (3 mins)

Let's make sure it works RIGHT NOW:

1. Click the **"Actions"** tab

2. On the left sidebar, you'll see **"Delta OTM Options Observer"**
   - Click on it

3. On the right side, you'll see a button **"Run workflow"**
   - Click it

4. A dropdown appears:
   - Click the green **"Run workflow"** button

5. **Wait 30-60 seconds**, then refresh the page

6. You'll see a new workflow run appear (with a yellow dot ğŸŸ¡ = running)

7. Click on the workflow run name (e.g., "Delta OTM Options Observer #1")

8. You'll see the job **"run-delta-script"** - click on it

9. Watch the steps execute in real-time! You should see:
   - âœ… Checkout repository
   - âœ… Set up Python
   - âœ… Install dependencies
   - âœ… Run Delta OTM Script (this will show your script's output)
   - âœ… Upload logs

10. If all steps have green checkmarks âœ… â†’ **SUCCESS!**

---

## STEP 5: Download and View Your Logs (2 mins)

1. Scroll to the bottom of the workflow run page

2. You'll see **"Artifacts"** section

3. Click on **"option-chain-logs-1"** (or whatever number it is)

4. A ZIP file downloads to your laptop

5. Extract the ZIP â†’ You'll see your `option_chain_logs` folder with the log file!

6. Open the `.txt` file â†’ You'll see your full Delta Exchange options data!

---

## âœ… DONE! What Happens Now:

### **Automatic Daily Runs:**
- â° Every day at **3:30 AM IST**
- ğŸ¤– GitHub's servers run your script automatically
- ğŸ’» Your laptop can be **completely OFF**
- ğŸ“Š Logs saved on GitHub for 90 days
- ğŸ“§ You get email if workflow fails (optional setting)

### **Manual Runs Anytime:**
- Go to Actions tab
- Click "Run workflow"
- Script runs immediately

### **View Results:**
- Actions tab â†’ Latest run â†’ Download artifacts
- Or view console output directly in browser

---

## ğŸ“Š What You'll See Each Day:
```
Your GitHub Repository
â”œâ”€â”€ Actions tab
    â”œâ”€â”€ Feb 1, 3:30 AM - âœ… Success
    â”‚   â””â”€â”€ Artifacts: option-chain-logs-1.zip
    â”œâ”€â”€ Feb 2, 3:30 AM - âœ… Success
    â”‚   â””â”€â”€ Artifacts: option-chain-logs-2.zip
    â”œâ”€â”€ Feb 3, 3:30 AM - âœ… Success
    â”‚   â””â”€â”€ Artifacts: option-chain-logs-3.zip
    â””â”€â”€ ...
